<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile - RealEstate</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f5f5f5; color: #333; }

        /* Header */
        header { background-color: #000; color: white; padding: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .header-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        .logo { font-size: 24px; font-weight: bold; cursor: pointer; }
        nav { display: flex; gap: 30px; }
        nav a { color: white; text-decoration: none; transition: color 0.3s; }
        nav a:hover { color: #666; }
        .back-btn { background-color: transparent; color: white; border: 1px solid white; padding: 8px 16px; border-radius: 4px; cursor: pointer; transition: all 0.3s; text-decoration: none; }
        .back-btn:hover { background-color: white; color: #000; }

        /* Profile Container */
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }

        /* Profile Header */
        .profile-header { background: white; border-radius: 12px; padding: 40px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 30px; display: grid; grid-template-columns: auto 1fr auto; gap: 30px; align-items: center; }
        .profile-avatar { width: 120px; height: 120px; background: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 48px; color: white; }
        .profile-info h1 { font-size: 32px; margin-bottom: 8px; color: #000; }
        .profile-type { color: #666; font-size: 16px; margin-bottom: 10px; }
        .profile-stats { display: flex; gap: 30px; margin-top: 15px; }
        .stat-item { text-align: center; }
        .stat-value { font-size: 24px; font-weight: 700; color: #000; }
        .stat-label { font-size: 12px; color: #666; text-transform: uppercase; }
        .profile-rating { background: #000; color: white; padding: 15px 25px; border-radius: 8px; text-align: center; }
        .rating-score { font-size: 36px; font-weight: 700; margin-bottom: 5px; }
        .rating-stars { font-size: 18px; margin-bottom: 5px; }
        .rating-count { font-size: 12px; opacity: 0.9; }

        /* Profile Content */
        .profile-content { display: grid; grid-template-columns: 1fr 380px; gap: 30px; }

        /* About Section */
        .about-section { background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 30px; }
        .section-title { font-size: 20px; font-weight: 700; color: #000; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #f0f0f0; }
        .about-text { color: #555; line-height: 1.8; margin-bottom: 20px; }
        .details-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .detail-item { display: flex; align-items: center; gap: 10px; padding: 12px; background: #f8f9fa; border-radius: 8px; }
        .detail-icon { font-size: 20px; }
        .detail-label { font-size: 12px; color: #666; }
        .detail-value { font-size: 14px; font-weight: 600; color: #000; }

        /* Reviews Section */
        .reviews-section { background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .reviews-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .btn-write-review { background: #000; color: white; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .btn-write-review:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); }
        .review-card { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 15px; transition: all 0.3s; }
        .review-card:hover { background: #e9ecef; transform: translateX(5px); }
        .review-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .reviewer-info { display: flex; align-items: center; gap: 12px; }
        .reviewer-avatar { width: 45px; height: 45px; background: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 18px; }
        .reviewer-name { font-weight: 600; color: #000; margin-bottom: 3px; }
        .review-date { font-size: 12px; color: #999; }
        .review-rating { color: #888; font-size: 16px; }
        .review-text { color: #555; line-height: 1.6; margin-bottom: 10px; }
        .review-helpful { display: flex; align-items: center; gap: 15px; font-size: 13px; color: #666; }
        .helpful-btn { background: none; border: 1px solid #ddd; padding: 5px 12px; border-radius: 4px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 5px; }
        .helpful-btn:hover { border-color: #000; color: #000; }
        .helpful-btn.active { background: #000; color: white; border-color: #000; }

        /* Sidebar */
        .sidebar { display: flex; flex-direction: column; gap: 20px; }
        .contact-card { background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); position: sticky; top: 100px; }
        .contact-form input, .contact-form textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; margin-bottom: 15px; transition: all 0.3s; }
        .contact-form input:focus, .contact-form textarea:focus { outline: none; border-color: #000; box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1); }
        .contact-form textarea { resize: vertical; min-height: 100px; }
        .btn-primary { width: 100%; padding: 14px; background: #000; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; margin-bottom: 10px; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); }

        /* Listings Section */
        .listings-section { background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .listings-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .listing-card { background: #f8f9fa; border-radius: 8px; overflow: hidden; cursor: pointer; transition: all 0.3s; }
        .listing-card:hover { transform: translateY(-5px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); }
        .listing-image { width: 100%; height: 180px; background: #e0e0e0; display: flex; align-items: center; justify-content: center; color: #666; font-size: 14px; }
        .listing-content { padding: 15px; }
        .listing-title { font-size: 16px; font-weight: 600; color: #000; margin-bottom: 8px; }
        .listing-price { font-size: 20px; font-weight: 700; color: #000; margin-bottom: 8px; }
        .listing-details { font-size: 12px; color: #666; }

        /* Review Modal */
        .review-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; justify-content: center; align-items: center; }
        .review-modal.show { display: flex; }
        .review-modal-content { background: white; padding: 30px; border-radius: 12px; max-width: 600px; width: 90%; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        .review-modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .review-modal-header h2 { font-size: 24px; color: #000; }
        .modal-close { background: none; border: none; font-size: 28px; color: #999; cursor: pointer; width: 30px; height: 30px; padding: 0; }
        .modal-close:hover { color: #333; }
        .rating-input { margin-bottom: 20px; }
        .rating-input label { display: block; margin-bottom: 10px; font-weight: 600; color: #000; }
        .star-rating { display: flex; gap: 5px; font-size: 32px; cursor: pointer; }
        .star-rating .star { color: #ddd; transition: all 0.3s; }
        .star-rating .star:hover, .star-rating .star.active { color: #888; }
        .review-form textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; resize: vertical; min-height: 120px; font-family: inherit; margin-bottom: 20px; }
        .review-form textarea:focus { outline: none; border-color: #000; box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1); }
        .review-submit-btn { width: 100%; padding: 14px; background: #000; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .review-submit-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); }

        /* Report Button */
        .report-btn { background: #666; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 6px; }
        .report-btn:hover { background: #e74c3c; transform: translateY(-1px); }

        /* Report Modal */
        .report-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; justify-content: center; align-items: center; }
        .report-modal.show { display: flex; }
        .report-modal-content { background: white; padding: 30px; border-radius: 12px; max-width: 600px; width: 90%; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        .report-modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .report-modal-header h2 { font-size: 24px; color: #000; }
        .report-form { display: flex; flex-direction: column; }
        .report-reason { margin-bottom: 20px; }
        .report-reason label { display: block; margin-bottom: 10px; font-weight: 600; color: #000; font-size: 14px; }
        .reason-options { display: flex; flex-direction: column; gap: 10px; }
        .reason-option { display: flex; align-items: center; gap: 10px; padding: 12px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: all 0.3s; border: 2px solid transparent; }
        .reason-option:hover { background: #e9ecef; }
        .reason-option.selected { border-color: #000; background: #fff; }
        .reason-option input[type="radio"] { width: 18px; height: 18px; cursor: pointer; }
        .reason-option label { flex: 1; cursor: pointer; font-size: 14px; color: #333; }
        .report-details { margin-bottom: 20px; }
        .report-details label { display: block; margin-bottom: 10px; font-weight: 600; color: #000; font-size: 14px; }
        .report-details textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; resize: vertical; min-height: 100px; font-family: inherit; }
        .report-details textarea:focus { outline: none; border-color: #000; box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1); }
        .report-submit-btn { width: 100%; padding: 14px; background: #e74c3c; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .report-submit-btn:hover { background: #c0392b; transform: translateY(-2px); box-shadow: 0 10px 20px rgba(231, 76, 60, 0.3); }
        .report-submit-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }

        /* Footer */
        footer { background-color: #000; color: white; padding: 40px 20px; margin-top: 60px; }
        .footer-container { max-width: 1200px; margin: 0 auto; text-align: center; }

        @media (max-width: 1024px) {
            .profile-content { grid-template-columns: 1fr; }
            .profile-header { grid-template-columns: 1fr; text-align: center; }
            .profile-stats { justify-content: center; }
            .contact-card { position: relative; top: 0; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo" onclick="window.location.href='index.html'">🏠 RealEstate</div>
            <nav>
                <a href="index.html">Home</a>
                <a href="my-posts.html">My Posts</a>
            </nav>
            <a href="javascript:history.back()" class="back-btn">← Back</a>
        </div>
    </header>

    <!-- Profile Container -->
    <div class="container">
        <!-- Profile Header -->
        <div class="profile-header">
            <div class="profile-avatar" id="profileAvatar">👨‍💼</div>
            <div class="profile-info">
                <h1 id="profileName">John Smith</h1>
                <div class="profile-type" id="profileType">Senior Real Estate Agent</div>
                <div class="profile-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="totalListings">12</div>
                        <div class="stat-label">Properties</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="yearsActive">5</div>
                        <div class="stat-label">Years Active</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalSales">48</div>
                        <div class="stat-label">Sales</div>
                    </div>
                </div>
            </div>
            <div>
                <div class="profile-rating" style="margin-bottom: 15px;">
                    <div class="rating-score" id="ratingScore">4.9</div>
                    <div class="rating-stars" id="ratingStars">⭐⭐⭐⭐⭐</div>
                    <div class="rating-count" id="ratingCount">Based on 18 reviews</div>
                </div>
                <button class="report-btn" id="reportUserBtn">
                    <span>⚠️</span>
                    <span>Report User</span>
                </button>
            </div>
        </div>

        <!-- Profile Content -->
        <div class="profile-content">
            <div>
                <!-- About Section -->
                <div class="about-section">
                    <h2 class="section-title">About</h2>
                    <p class="about-text" id="aboutText">
                        John Smith is a dedicated real estate professional with over 5 years of experience in the industry. Specializing in residential properties, John has helped numerous families find their dream homes in the Downtown area. Known for exceptional customer service and market knowledge, John provides personalized guidance throughout the entire buying or selling process.
                    </p>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="detail-icon">📧</span>
                            <div>
                                <div class="detail-label">Email</div>
                                <div class="detail-value" id="profileEmail">johnsmith@email.com</div>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">📱</span>
                            <div>
                                <div class="detail-label">Phone</div>
                                <div class="detail-value" id="profilePhone">+1 (555) 123-4567</div>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">📍</span>
                            <div>
                                <div class="detail-label">Location</div>
                                <div class="detail-value" id="profileLocation">Downtown, CA</div>
                            </div>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">🏅</span>
                            <div>
                                <div class="detail-label">Verified Agent</div>
                                <div class="detail-value">✓ Verified</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Active Listings -->
                <div class="listings-section">
                    <h2 class="section-title">Active Listings (<span id="listingsCount">3</span>)</h2>
                    <div class="listings-grid" id="listingsGrid">
                        <!-- Listings will be loaded here -->
                    </div>
                </div>

                <!-- Reviews Section -->
                <div class="reviews-section">
                    <div class="reviews-header">
                        <h2 class="section-title" style="margin-bottom: 0;">Reviews</h2>
                        <button class="btn-write-review" id="writeReviewBtn">✍️ Write a Review</button>
                    </div>
                    <div id="reviewsList">
                        <!-- Reviews will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="contact-card">
                    <h3 class="section-title">Contact Agent</h3>
                    <form class="contact-form" id="contactForm">
                        <input type="text" placeholder="Your Name" required>
                        <input type="email" placeholder="Your Email" required>
                        <input type="tel" placeholder="Your Phone" required>
                        <textarea placeholder="Your message..."></textarea>
                        <button type="submit" class="btn-primary">📧 Send Message</button>
                    </form>
                </div>
            </aside>
        </div>
    </div>

    <!-- Review Modal -->
    <div class="review-modal" id="reviewModal">
        <div class="review-modal-content">
            <div class="review-modal-header">
                <h2>Write a Review for <span id="reviewTargetName"></span></h2>
                <button class="modal-close" onclick="closeReviewModal()">×</button>
            </div>
            <form class="review-form" id="reviewForm">
                <div class="rating-input">
                    <label>Your Rating</label>
                    <div class="star-rating" id="starRating">
                        <span class="star" data-rating="1">★</span>
                        <span class="star" data-rating="2">★</span>
                        <span class="star" data-rating="3">★</span>
                        <span class="star" data-rating="4">★</span>
                        <span class="star" data-rating="5">★</span>
                    </div>
                </div>
                <div>
                    <label for="reviewText">Your Review</label>
                    <textarea id="reviewText" placeholder="Share your experience working with this agent..." required></textarea>
                </div>
                <button type="submit" class="review-submit-btn">Submit Review</button>
            </form>
        </div>
    </div>

    <!-- Report User Modal -->
    <div class="report-modal" id="reportModal">
        <div class="report-modal-content">
            <div class="report-modal-header">
                <h2>Report User</h2>
                <button class="modal-close" onclick="closeReportModal()">×</button>
            </div>
            <form class="report-form" id="reportForm">
                <div class="report-reason">
                    <label>Reason for reporting *</label>
                    <div class="reason-options">
                        <div class="reason-option" onclick="selectReason(this, 'spam')">
                            <input type="radio" name="reason" value="spam" id="reason-spam">
                            <label for="reason-spam">Spam or misleading information</label>
                        </div>
                        <div class="reason-option" onclick="selectReason(this, 'fraud')">
                            <input type="radio" name="reason" value="fraud" id="reason-fraud">
                            <label for="reason-fraud">Fraudulent activity or scam</label>
                        </div>
                        <div class="reason-option" onclick="selectReason(this, 'inappropriate')">
                            <input type="radio" name="reason" value="inappropriate" id="reason-inappropriate">
                            <label for="reason-inappropriate">Inappropriate content or behavior</label>
                        </div>
                        <div class="reason-option" onclick="selectReason(this, 'harassment')">
                            <input type="radio" name="reason" value="harassment" id="reason-harassment">
                            <label for="reason-harassment">Harassment or abuse</label>
                        </div>
                        <div class="reason-option" onclick="selectReason(this, 'fake')">
                            <input type="radio" name="reason" value="fake" id="reason-fake">
                            <label for="reason-fake">Fake profile or impersonation</label>
                        </div>
                        <div class="reason-option" onclick="selectReason(this, 'other')">
                            <input type="radio" name="reason" value="other" id="reason-other">
                            <label for="reason-other">Other</label>
                        </div>
                    </div>
                </div>
                <div class="report-details">
                    <label for="reportDetails">Additional details (optional)</label>
                    <textarea id="reportDetails" placeholder="Please provide more information about why you're reporting this user..."></textarea>
                </div>
                <button type="submit" class="report-submit-btn" id="reportSubmitBtn">Submit Report</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <p>&copy; 2025 RealEstate. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Get user parameter from URL
        const urlParams = new URLSearchParams(window.location.search);
        const userEmail = urlParams.get('user') || 'johnsmith@email.com';

        // Mock user database with hardcoded reviews
        const userDatabase = {
            'johnsmith@email.com': {
                name: 'John Smith',
                avatar: '👨‍💼',
                type: 'Senior Real Estate Agent',
                email: 'johnsmith@email.com',
                phone: '+1 (555) 123-4567',
                location: 'Downtown, CA',
                about: 'John Smith is a dedicated real estate professional with over 5 years of experience in the industry. Specializing in residential properties, John has helped numerous families find their dream homes in the Downtown area. Known for exceptional customer service and market knowledge, John provides personalized guidance throughout the entire buying or selling process.',
                stats: { properties: 12, years: 5, sales: 48 },
                rating: { score: 4.9, count: 18 },
                listings: [
                    { title: 'Modern Family Home', price: '$450,000', details: '4 beds • 2.5 baths • 2,400 sqft' },
                    { title: 'Luxury Townhouse', price: '$425,000', details: '3 beds • 2.5 baths • 2,100 sqft' },
                    { title: 'Contemporary Home', price: '$495,000', details: '4 beds • 3 baths • 2,600 sqft' }
                ],
                reviews: [
                    { reviewer: 'Emily Rodriguez', avatar: 'ER', rating: 5, date: '2 weeks ago', text: 'John was absolutely fantastic to work with! He helped us find our dream home and was patient throughout the entire process. His knowledge of the market is exceptional and he always responded to our questions promptly. Highly recommend!' },
                    { reviewer: 'Michael Chen', avatar: 'MC', rating: 5, date: '1 month ago', text: 'Professional, knowledgeable, and very responsive. John made our home buying experience smooth and stress-free. He went above and beyond to ensure we found the perfect property for our family.' },
                    { reviewer: 'Sarah Williams', avatar: 'SW', rating: 5, date: '2 months ago', text: 'Excellent service from start to finish! John is very professional and knows the market inside out. He helped us sell our property quickly and at a great price. Would definitely work with him again.' },
                    { reviewer: 'David Thompson', avatar: 'DT', rating: 4, date: '3 months ago', text: 'Great experience overall. John was very helpful and professional. The only minor issue was some delays in communication, but everything worked out well in the end.' },
                    { reviewer: 'Lisa Martinez', avatar: 'LM', rating: 5, date: '4 months ago', text: 'John is the best real estate agent we have worked with. He is very knowledgeable, patient, and always puts his clients first. We highly recommend him to anyone looking to buy or sell property!' }
                ]
            },
            'sarahjohnson@email.com': {
                name: 'Sarah Johnson',
                avatar: '👩‍💼',
                type: 'Real Estate Specialist',
                email: 'sarahjohnson@email.com',
                phone: '+1 (555) 987-6543',
                location: 'Westside, CA',
                about: 'Sarah Johnson brings 8 years of real estate expertise to every transaction. Focusing on luxury properties and commercial spaces, Sarah has built a reputation for excellence and integrity. Her clients appreciate her attention to detail and commitment to achieving the best possible outcomes.',
                stats: { properties: 18, years: 8, sales: 72 },
                rating: { score: 4.8, count: 24 },
                listings: [
                    { title: 'Executive Villa', price: '$850,000', details: '5 beds • 4 baths • 3,800 sqft' },
                    { title: 'Downtown Loft', price: '$620,000', details: '2 beds • 2 baths • 1,500 sqft' }
                ],
                reviews: [
                    { reviewer: 'Robert Anderson', avatar: 'RA', rating: 5, date: '1 week ago', text: 'Sarah is exceptional! Her expertise in luxury properties is unmatched. She found us the perfect home and negotiated a great deal. Couldn\'t be happier!' },
                    { reviewer: 'Jennifer Lee', avatar: 'JL', rating: 5, date: '3 weeks ago', text: 'Working with Sarah was a pleasure. She is professional, knowledgeable, and always available to answer questions. Highly recommend her services!' },
                    { reviewer: 'James Wilson', avatar: 'JW', rating: 4, date: '1 month ago', text: 'Very good experience. Sarah knows her stuff and helped us navigate a complex transaction. Would work with her again.' },
                    { reviewer: 'Patricia Brown', avatar: 'PB', rating: 5, date: '2 months ago', text: 'Sarah went above and beyond for us. She is dedicated, professional, and truly cares about her clients. We found our dream home thanks to her!' }
                ]
            }
        };

        // Load user profile
        function loadProfile() {
            const user = userDatabase[userEmail] || userDatabase['johnsmith@email.com'];
            
            document.getElementById('profileAvatar').textContent = user.avatar;
            document.getElementById('profileName').textContent = user.name;
            document.getElementById('profileType').textContent = user.type;
            document.getElementById('profileEmail').textContent = user.email;
            document.getElementById('profilePhone').textContent = user.phone;
            document.getElementById('profileLocation').textContent = user.location;
            document.getElementById('aboutText').textContent = user.about;
            document.getElementById('totalListings').textContent = user.stats.properties;
            document.getElementById('yearsActive').textContent = user.stats.years;
            document.getElementById('totalSales').textContent = user.stats.sales;
            document.getElementById('ratingScore').textContent = user.rating.score;
            document.getElementById('ratingStars').textContent = '⭐'.repeat(Math.round(user.rating.score));
            document.getElementById('ratingCount').textContent = `Based on ${user.rating.count} reviews`;
            document.getElementById('reviewTargetName').textContent = user.name;

            // Load listings
            const listingsGrid = document.getElementById('listingsGrid');
            document.getElementById('listingsCount').textContent = user.listings.length;
            listingsGrid.innerHTML = user.listings.map(listing => `
                <div class="listing-card" onclick="window.location.href='property.html'">
                    <div class="listing-image">[Property Image]</div>
                    <div class="listing-content">
                        <div class="listing-title">${listing.title}</div>
                        <div class="listing-price">${listing.price}</div>
                        <div class="listing-details">${listing.details}</div>
                    </div>
                </div>
            `).join('');

            // Load reviews
            const reviewsList = document.getElementById('reviewsList');
            reviewsList.innerHTML = user.reviews.map((review, index) => `
                <div class="review-card" style="animation: fadeIn 0.5s ease-out ${index * 0.1}s backwards;">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-avatar">${review.avatar}</div>
                            <div>
                                <div class="reviewer-name">${review.reviewer}</div>
                                <div class="review-date">${review.date}</div>
                            </div>
                        </div>
                        <div class="review-rating">${'⭐'.repeat(review.rating)}</div>
                    </div>
                    <div class="review-text">${review.text}</div>
                    <div class="review-helpful">
                        <button class="helpful-btn" onclick="toggleHelpful(this)">
                            <span>👍</span>
                            <span>Helpful (0)</span>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Review modal functionality
        let selectedRating = 0;

        document.getElementById('writeReviewBtn').addEventListener('click', () => {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            if (!isLoggedIn) {
                alert('Please login to write a review!');
                window.location.href = 'login.html';
                return;
            }
            document.getElementById('reviewModal').classList.add('show');
        });

        function closeReviewModal() {
            document.getElementById('reviewModal').classList.remove('show');
            document.getElementById('reviewForm').reset();
            selectedRating = 0;
            document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
        }

        // Star rating
        const stars = document.querySelectorAll('.star');
        stars.forEach(star => {
            star.addEventListener('click', () => {
                selectedRating = parseInt(star.dataset.rating);
                stars.forEach(s => {
                    if (parseInt(s.dataset.rating) <= selectedRating) {
                        s.classList.add('active');
                    } else {
                        s.classList.remove('active');
                    }
                });
            });

            star.addEventListener('mouseenter', () => {
                const rating = parseInt(star.dataset.rating);
                stars.forEach(s => {
                    if (parseInt(s.dataset.rating) <= rating) {
                        s.style.color = '#888';
                    } else {
                        s.style.color = '#ddd';
                    }
                });
            });
        });

        document.getElementById('starRating').addEventListener('mouseleave', () => {
            stars.forEach(s => {
                if (parseInt(s.dataset.rating) <= selectedRating) {
                    s.style.color = '#888';
                } else {
                    s.style.color = '#ddd';
                }
            });
        });

        // Submit review
        document.getElementById('reviewForm').addEventListener('submit', (e) => {
            e.preventDefault();

            if (selectedRating === 0) {
                showNotification('Please select a rating!');
                return;
            }

            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            const reviewText = document.getElementById('reviewText').value;
            const reviewsList = document.getElementById('reviewsList');

            const userInitials = currentUser.name ? currentUser.name.split(' ').map(n => n[0]).join('') : 'YO';
            const userName = currentUser.name || 'You';

            const newReview = document.createElement('div');
            newReview.className = 'review-card';
            newReview.style.animation = 'fadeIn 0.5s';
            newReview.innerHTML = `
                <div class="review-header">
                    <div class="reviewer-info">
                        <div class="reviewer-avatar">${userInitials}</div>
                        <div>
                            <div class="reviewer-name">${userName}</div>
                            <div class="review-date">Just now</div>
                        </div>
                    </div>
                    <div class="review-rating">${'⭐'.repeat(selectedRating)}</div>
                </div>
                <div class="review-text">${reviewText}</div>
                <div class="review-helpful">
                    <button class="helpful-btn" onclick="toggleHelpful(this)">
                        <span>👍</span>
                        <span>Helpful (0)</span>
                    </button>
                </div>
            `;

            reviewsList.insertBefore(newReview, reviewsList.firstChild);
            closeReviewModal();
            showNotification('Review submitted successfully! Thank you for your feedback.');

            // Update review count
            const currentCount = parseInt(document.getElementById('ratingCount').textContent.match(/\d+/)[0]);
            document.getElementById('ratingCount').textContent = `Based on ${currentCount + 1} reviews`;
        });

        function toggleHelpful(button) {
            button.classList.toggle('active');
            const countSpan = button.querySelector('span:last-child');
            const match = countSpan.textContent.match(/\d+/);
            let count = match ? parseInt(match[0]) : 0;
            
            if (button.classList.contains('active')) {
                count++;
                showNotification('Thanks for your feedback!');
            } else {
                count--;
            }
            
            countSpan.textContent = `Helpful (${count})`;
        }

        // Contact form
        document.getElementById('contactForm').addEventListener('submit', (e) => {
            e.preventDefault();
            showNotification('Message sent successfully! The agent will contact you soon.');
            e.target.reset();
        });

        function showNotification(message) {
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();

            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed; top: 80px; right: 20px; background: #000; color: white;
                padding: 15px 25px; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 1000; animation: slideInRight 0.3s ease-out; font-size: 14px; font-weight: 500;
            `;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
            @keyframes slideInRight { from { opacity: 0; transform: translateX(100px); } to { opacity: 1; transform: translateX(0); } }
            @keyframes slideOutRight { from { opacity: 1; transform: translateX(0); } to { opacity: 0; transform: translateX(100px); } }
        `;
        document.head.appendChild(style);

        // ========== Report User Functionality ==========
        let selectedReportReason = null;

        document.getElementById('reportUserBtn').addEventListener('click', () => {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            if (!isLoggedIn) {
                alert('Please login to report a user!');
                window.location.href = 'login.html';
                return;
            }
            document.getElementById('reportModal').classList.add('show');
        });

        function closeReportModal() {
            document.getElementById('reportModal').classList.remove('show');
            document.getElementById('reportForm').reset();
            selectedReportReason = null;
            document.querySelectorAll('.reason-option').forEach(option => {
                option.classList.remove('selected');
            });
        }

        function selectReason(element, reason) {
            // Remove selected from all
            document.querySelectorAll('.reason-option').forEach(option => {
                option.classList.remove('selected');
            });
            // Add selected to clicked
            element.classList.add('selected');
            element.querySelector('input[type="radio"]').checked = true;
            selectedReportReason = reason;
        }

        // Report form submission
        document.getElementById('reportForm').addEventListener('submit', (e) => {
            e.preventDefault();

            if (!selectedReportReason) {
                showNotification('Please select a reason for reporting!');
                return;
            }

            const details = document.getElementById('reportDetails').value;
            const user = userDatabase[userEmail] || userDatabase['johnsmith@email.com'];
            
            const submitBtn = document.getElementById('reportSubmitBtn');
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;

            // Simulate report submission
            setTimeout(() => {
                closeReportModal();
                showNotification('Report submitted successfully. Our team will review it shortly.');
                submitBtn.textContent = 'Submit Report';
                submitBtn.disabled = false;

                // Log report details (in real app, this would go to backend)
                console.log('Report submitted:', {
                    reportedUser: user.email,
                    reason: selectedReportReason,
                    details: details,
                    timestamp: new Date().toISOString()
                });
            }, 1500);
        });

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('review-modal')) {
                closeReviewModal();
            }
            if (e.target.classList.contains('report-modal')) {
                closeReportModal();
            }
        });

        // Load profile on page load
        loadProfile();
    </script>
</body>
</html>